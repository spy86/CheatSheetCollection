<!DOCTYPE HTML>
<html id="hs-topic-p">
<!-- saved from url=(0025)http://www.helpsmith.com/ -->
<head>
<title>Docker</title>
<meta charset="windows-1250" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="HelpSmith 8.0 (Build 18.1202)" />
<style type="text/css" media="screen">
html {
  height: 100%;
}
body {
  margin: 0 8px 0 8px;
}
</style>
<link type="text/css" rel="stylesheet" href="../css/topics/style.css" />
<script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../js/settings.js?1845a896"></script>
<script type="text/javascript" src="../js/core.min.js?392d0f49"></script>
<script type="text/javascript" src="../js/topic.min.js?392d0f49"></script>
<script type="text/javascript">
	var topicContext = 50;
</script>
</head>
<body>
<p class="ps7"><span class="ts3">Commands</span></p>
<p class="ps5"><span class="ts2">Note container is either a container id, or a container name (if such is given to a container with the --name option on start). Both can be obtained with the &quot;docker ps -a&quot; command is either an image id, or an image name. Both can be obtained with the &quot;docker image&quot; command. Do not confuse with container id/name!</span></p>
<p class="ps9"><span class="ts5">docker ps&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List running instances</span><br /><span class="ts5">docker ps -a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List all instances</span><br /><span class="ts5">docker inspect &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Instance details</span><br /><span class="ts5">docker top&nbsp;&nbsp;&nbsp;&nbsp; &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Instance processes</span><br /><span class="ts5">docker logs&nbsp;&nbsp;&nbsp; &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Instance console log</span><br /><span class="ts5">docker port&nbsp;&nbsp;&nbsp; &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Shows container's port mapping. The same can be seen with &quot;docker ps&quot; though (row - &quot;PORTS&quot;)</span><br /><span class="ts5">docker diff&nbsp;&nbsp;&nbsp; &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Shows changes on container's filesystem. Will produce a list of files and folders prefixed by a</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # character. &quot;A&quot; is for &quot;added&quot;, &quot;C&quot; is for changed.</span><br /><span class="ts5">docker stats&nbsp;&nbsp; &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Shows the consumed by the container resources (memory, CPU, network bandwidth)</span><br /><br /><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br /><br /><span class="ts5">docker run -i -t ubuntu /bin/bash&nbsp;&nbsp; # New instance from image. &quot;-i&quot; is for &quot;interactive&quot; and &quot;t&quot; is for terminal. Without &quot;it&quot; it</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # won't be interactive - you will get a shell/terminal, but will not be able to type anything onto </span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # it. Without &quot;t&quot; you will not get a terminal opened. The command will run and exit.</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br /><span class="ts5">docker run -i -t --rm ubuntu /bin/bash # If you need a one-time container, then use the --rm option. Thus, once you exit the container,</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # it will be removed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br /><br /><span class="ts5">docker start&nbsp;&nbsp; &lt;container&gt;</span><br /><span class="ts5">docker restart &lt;container&gt;</span><br /><span class="ts5">docker stop&nbsp;&nbsp;&nbsp; &lt;container&gt;</span><br /><span class="ts5">docker attach&nbsp; &lt;container&gt;</span><br /><span class="ts5">docker rm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;container&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Removes / deletes a container (do not confuse with the &quot;rmi&quot; command - it removes an image!).</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # The container must be stopped in beforehand.</span><br /><br /><span class="ts5">docker cp '&lt;id&gt;':/data/file .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Copy file out of container</span><br /><br /><span class="ts5">docker images&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List locally stored images</span><br /><span class="ts5">docker rmi &lt;image&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Removes / deletes a locally stored image</span><br /><span class="ts5">docker save -o &lt;tarball&gt; &lt;image&gt;&nbsp;&nbsp;&nbsp; # Saves a local image as a tarball, so you can archive/transfer or inspect its content</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Example: docker save -o /tmp/myimage.tar busybox</span><br /><span class="ts5">docker history &lt;image&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Shows image creation history. Useful if you want to &quot;recreate&quot; the Dockerfile of an image -</span><br /><span class="ts5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # in cases where you are interested how the image has been created.</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps7"><span class="ts3">Dockerfile Examples</span></p>
<p class="ps5"><span class="ts2">Installing packages</span></p>
<p class="ps9"><span class="ts5">FROM debian:wheezy</span><br /><span class="ts5">RUN apt-get update</span><br /><span class="ts5">RUN apt-get -y install python git</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps10"><span class="ts2">Adding users</span></p>
<p class="ps9"><span class="ts5">RUN useradd jsmith -u 1001 -s /bin/bash</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps10"><span class="ts2">Defining work directories and environment</span></p>
<p class="ps9"><span class="ts5">WORKDIR /home/jsmith/</span><br /><span class="ts5">ENV HOME /home/jsmith</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps10"><span class="ts2">Mounts</span></p>
<p class="ps9"><span class="ts5">VOLUME [&quot;/home&quot;]</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps10"><span class="ts2">Opening ports</span></p>
<p class="ps9"><span class="ts5">EXPOSE 22</span><br /><span class="ts5">EXPOSE 80</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps10"><span class="ts2">Start command</span></p>
<p class="ps9"><span class="ts5">USER jsmith</span><br /><span class="ts5">WORKDIR /home/jsmith/</span><br /><span class="ts5">ENTRYPOINT bin/my-start-script.sh</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps10"><a href="https://serverfault.com/a/683651" class="hs0">Setting timezone</a></p>
<p class="ps9"><span class="ts5">ENV TZ=America/Los_Angeles</span><br /><span class="ts5">RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</span><br /><span class="ts6">&nbsp;</span></p>
<p class="ps7"><span class="ts3">Misc</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="https://github.com/googlecloudplatform/kubernetes" class="hs0">kubernetes</a><span class="ts2">: Docker container cluster management</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="https://coreos.com/blog/rocket/" class="hs0">CoreOS Rocket</a><span class="ts2">&nbsp;(commercial Docker alternative)</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://aws.amazon.com/ecs/" class="hs0">Amazon EC2 Container Service</a><span class="ts2">&nbsp;- Docker container support on AWS</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.hokstad.com/docker/patterns" class="hs0">Docker Patterns</a><span class="ts2">&nbsp;- container inheritance examples</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="https://github.com/docker/docker-bench-security" class="hs0">Docker Bench Security</a><span class="ts2">&nbsp;- Test Docker containers for security issues</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="https://github.com/OpenSCAP/container-compliance" class="hs0">Docker OpenSCAP Checks</a></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="https://gist.github.com/jumanjiman/f9d3db977846c163df12" class="hs0">Container Hardening Script</a></p>
<p class="ps7"><span class="ts3">Best Practices for Images</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">When using ext4: disable journaling</span></p>
<p class="ps3"><br /></p>
<div>
  <hr class="hline0" />
</div>
<p class="ps4"><span class="ts1">Created with an evaluation copy of HelpSmith.</span><br /><span class="ts1">To remove this notice, you should </span><a href="http://www.helpsmith.com/buynow.php" target="_blank" class="hs1">purchase the full version</a><span class="ts1">&nbsp;of the product.</span></p>
</body>
</html>