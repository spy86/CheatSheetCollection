<!DOCTYPE HTML>
<html id="hs-topic-p">
<!-- saved from url=(0025)http://www.helpsmith.com/ -->
<head>
<title>Solaris</title>
<meta charset="windows-1250" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="HelpSmith 8.0 (Build 18.1202)" />
<style type="text/css" media="screen">
html {
  height: 100%;
}
body {
  margin: 0 8px 0 8px;
}
</style>
<link type="text/css" rel="stylesheet" href="../css/topics/style.css" />
<script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../js/settings.js?1845a896"></script>
<script type="text/javascript" src="../js/core.min.js?392d0f49"></script>
<script type="text/javascript" src="../js/topic.min.js?392d0f49"></script>
<script type="text/javascript">
	var topicContext = 560;
</script>
</head>
<body>
<p class="ps7"><span class="ts3">Debugging</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">mdb - Analysing core files:</span></p>
<p class="ps2"><span class="ts8">$ mdb core.xxxx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Open core file</span><br /><span class="ts8">&gt; ::status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Print core summary</span><br /><br /><span class="ts8">&gt; ::stacks&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Backtrace</span><br /><span class="ts8">&gt; ::stacks -v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Backtrace verbose</span><br /><br /><span class="ts8">&gt; ::quit</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://docs.sun.com/app/docs/doc/817-0404/chapter1-9?a=view" class="hs0">Changing Solaris Kernel Parameters</a><span class="ts2">:</span></p>
<p class="ps2"><span class="ts8"># mdb -kw</span><br /><span class="ts8">&gt; maxusers/W 500</span><br /><span class="ts8">&gt; $q</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Library Dependencies of a running process:</span></p>
<p class="ps2"><span class="ts8">pldd &lt;pid&gt;</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Details of Memory Usage - pmap:</span></p>
<p class="ps2"><span class="ts8"># pmap 19463</span><br /><span class="ts8">19463:&nbsp; -sh</span><br /><span class="ts8">08047000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4K rw---&nbsp;&nbsp;&nbsp; [ stack ]</span><br /><span class="ts8">08050000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 76K r-x--&nbsp; /sbin/sh</span><br /><span class="ts8">08073000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4K rw---&nbsp; /sbin/sh</span><br /><span class="ts8">08074000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16K rw---&nbsp;&nbsp;&nbsp; [ heap ]</span><br /><span class="ts8">FEE60000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24K r-x--&nbsp; /lib/libgen.so.1</span><br /><span class="ts8">FEE76000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4K rw---&nbsp; /lib/libgen.so.1</span><br /><span class="ts8">FEE80000&nbsp;&nbsp;&nbsp; 1072K r-x--&nbsp; /lib/libc.so.1</span><br /><span class="ts8">FEF90000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24K rwx--&nbsp;&nbsp;&nbsp; [ anon ]</span><br /><span class="ts8">FEF9C000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 32K rw---&nbsp; /lib/libc.so.1</span><br /><span class="ts8">FEFA4000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8K rw---&nbsp; /lib/libc.so.1</span><br /><span class="ts8">FEFC4000&nbsp;&nbsp;&nbsp;&nbsp; 156K r-x--&nbsp; /lib/ld.so.1</span><br /><span class="ts8">FEFF0000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4K rwx--&nbsp;&nbsp;&nbsp; [ anon ]</span><br /><span class="ts8">FEFF7000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4K rwxs-&nbsp;&nbsp;&nbsp; [ anon ]</span><br /><span class="ts8">FEFFB000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8K rwx--&nbsp; /lib/ld.so.1</span><br /><span class="ts8">FEFFD000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4K rwx--&nbsp; /lib/ld.so.1</span><br /><span class="ts8">&nbsp;total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1440K</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://developers.sun.com/solaris/articles/kstatc.html" class="hs0">kstat API</a><span class="ts2">: Accessing Solaris kernel statistics using C-API</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://gd.tuwien.ac.at/linuxcommand.org/man_pages/infocmp1.html" class="hs0">infocmp - Compare terminal settings</a><span class="ts2">: This is not Solaris specific, but you need it quite often.</span></p>
<p class="ps2"><span class="ts8">infocmp -L</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.solarisinternals.com/wiki/index.php/DTraceToolkit" class="hs0">DTraceToolkit</a><span class="ts2">: Useful dtrace scripts for all types of debugging tasks.</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.camelrichard.org/topics/Solaris/Three_Solaris_Hogs_for_Testing" class="hs0">How to kill a Solaris machine</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">List/Set PROM Config</span></p>
<p class="ps2"><span class="ts8">eeprom</span><br /><span class="ts8">eeprom &lt;key&gt;=&lt;value&gt;</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Trace system calls</span></p>
<p class="ps1"><span class="ts8">truss -p &lt;PID&gt;</span><br />&nbsp;</p>
<p class="ps7"><span class="ts3">Network</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://stupidunixlinuxtricks.blogspot.com/2008/03/snoop-and-tcpdump.html" class="hs0">snoop vs. tcpdump</a><span class="ts2">: How to use snoop:</span></p>
<p class="ps2"><span class="ts8">snoop -v -d qfe0 -x0 host 192.168.1.87</span><br /><span class="ts8">snoop -v -d qfe0 -x0 port 22</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Show installed NIcs:</span></p>
<p class="ps2"><span class="ts8">dladm show-dev </span><br /><span class="ts8">dladm show-link</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://prefetch.net/articles/solarisiscsi.html" class="hs0">iSCSI on Solaris</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://gurkulindia.com/main/2011/04/soalris-find-network-interface-names-that-are-available-but-not-plumbed/" class="hs0">Find unknown NIC</a><span class="ts2">: When you do not know the network interface name and don't want to guess: simple plumb all unplumbed NICs with</span></p>
<p class="ps1"><span class="ts8">ifconfig plumb -a</span><br />&nbsp;</p>
<p class="ps7"><span class="ts3">Legacy</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts9">Extend 256 file descriptor limit for 32bit binaries</span><span class="ts2">: This requires preloading a helper library</span></p>
<p class="ps2"><span class="ts8">% ulimit -n 256</span><br /><br /><span class="ts8">% echo 'rlim_fd_max/D' | mdb -k | awk '{ print $2 }'&nbsp; # determine allowed maximum</span><br /><span class="ts8">65536</span><br /><br /><span class="ts8">% ulimit -n 65536</span><br /><br /><span class="ts8">% export LD_PRELOAD_32=/usr/lib/extendedFILE.so.1</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Determine if Solaris is 32 or 64 bit:</span></p>
<p class="ps1"><span class="ts8">isainfo -b</span><br />&nbsp;</p>
<p class="ps7"><span class="ts3">Monitoring</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://sourceforge.net/projects/setoolkit/" class="hs0">SEtoolkit</a><span class="ts2">: Performance data gathering script collection based on orcallator.</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.orcaware.com/orca/docs/orcallator.html" class="hs0">Orcallator</a><span class="ts2">: Provides a variety of Solaris specific probes.</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.brendangregg.com/K9Toolkit/nicstat.c" class="hs0">NICstat</a><span class="ts2">: Source (C) for a monitoring NICs in Solaris. vmstat/iostat like command line client.</span></p>
<p class="ps1"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://munin-monitoring.org/wiki/SolarisInstallation" class="hs0">Munin on Solaris</a></p>
<p class="ps7"><span class="ts3">Package Installation</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Resolve File to Package:</span></p>
<p class="ps1"><span class="ts8">pkgchk -l -p /usr/bin/ls</span><br />&nbsp;</p>
<p class="ps7"><span class="ts3">Service Management</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">svcs - List Service Infos</span></p>
<p class="ps2"><span class="ts8">svcs -a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List all installed services and their current state</span><br /><span class="ts8">svcs -d &lt;service&gt;&nbsp;&nbsp;&nbsp; # List all dependencies of a service</span><br /><span class="ts8">svcs -D &lt;service&gt;&nbsp;&nbsp;&nbsp; # List who is depending on a service</span><br /><span class="ts8">svcs -xv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List why something is failed</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">svcadm - Control Services</span></p>
<p class="ps1"><span class="ts8">svcadm enable &lt;service&gt;</span><br /><span class="ts8">svcadm disable &lt;service&gt;</span><br /><span class="ts8">svcadm refresh &lt;service&gt;&nbsp;&nbsp;&nbsp; # like init reload</span><br /><span class="ts8">svcadm restart &lt;service&gt;</span><br /><br /><span class="ts8">svcadm clear &lt;service&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Clear errors: try starting again...</span><br />&nbsp;</p>
<p class="ps7"><span class="ts3">General</span></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.brandonhutchinson.com/Solaris_JumpStart_notes.html" class="hs0">Jumpstart HowTo</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://kalali.me/configuring-dhcp-server-in-solaris/" class="hs0">SUNWdhcs DHCPd Setup</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.garex.net/sun/packaging/index.html" class="hs0">Sun Packaging Guide</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://developers.sun.com/solaris/articles/event_completion.html" class="hs0">Solaris Event Notification API</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://delicious.com/redirect?url=http://www.sun.com/products-n-solutions/hardware/docs/html/806-1377-10/index.html" class="hs0">Suns OpenBoot PROM reference manual</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://docs.oracle.com/cd/E19683-01/817-0573/" class="hs0">Solaris IPv6 Administration Guide</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">ALOM/iLOM - Get OS Console:</span></p>
<p class="ps2"><span class="ts8">start /SP/console</span><br />&nbsp;</p>
<p class="ps2"><span class="ts2">If the console is already in use you can kill it with</span></p>
<p class="ps2"><span class="ts8">stop /SP/console</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://docs.oracle.com/cd/E19102-01/n440.srvr/817-5481-11/sadm_util.html" class="hs0">ALOM - Set/Get Infos from CLI</a><span class="ts2">: When you want to fetch infos or change settings from a running system (e.g. from scripts) you can use the scadm (or rscadm) command. Examples:</span></p>
<p class="ps2"><span class="ts8"># Show log</span><br /><span class="ts8">scadm loghistory</span><br /><br /><span class="ts8"># Send a normal or critical console message</span><br /><span class="ts8">scadm send_event &quot;Important&quot;</span><br /><span class="ts8">scadm send_event -c &quot;Critical!&quot;</span><br /><br /><span class="ts8"># Dump all or single settings</span><br /><span class="ts8">scadm show </span><br /><span class="ts8">scadm show sc_customerinfo</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Dump HW Infos:</span></p>
<p class="ps2"><span class="ts8">prtconf -v</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://unixadminschool.com/blog/2013/07/solaris-storage-configuration-emc-vmax-powerpath-mpxio-vxvm/" class="hs0">Cheat Sheet Adding Storage</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://lildude.co.uk/zfs-cheatsheet" class="hs0">ZFS Cheat Sheet</a><span class="ts2">:</span></p>
<p class="ps2"><span class="ts8"># Analysis</span><br /><span class="ts8">zpool list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List pools</span><br /><span class="ts8">zpool status -v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Tree like summary of all disks</span><br /><span class="ts8">zpool iostat 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # iostat for all ZFS pools</span><br /><span class="ts8">zpool history&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Show recent commands</span><br /><br /><span class="ts8"># Handling properties</span><br /><span class="ts8">zfs get all z0</span><br /><span class="ts8">zfs get all z0/data</span><br /><span class="ts8">zfs set sharenfs=on z0/data</span><br /><span class="ts8">zfs set sharesmb=on z0/data</span><br /><span class="ts8">zfs set compression=on z0/data</span><br /><br /><span class="ts8"># Mounting </span><br /><span class="ts8">zfs mount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List all ZFS mount points</span><br /><span class="ts8">zfs set mountpoint=/export/data z0/data</span><br /><span class="ts8">zfs mount /export/data</span><br /><span class="ts8">zfs unmount /export/data</span><br /><br /><span class="ts8"># NFS Shares</span><br /><span class="ts8">zfs set sharenfs=on z1/backup/mydata&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Enable as NFS share</span><br /><span class="ts8">zfs get sharenfs z1/backup/mydata&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # List share options</span><br /><span class="ts8">zfs sharenfs=&quot;&lt;options&gt;&quot; z1/backup/mydata&nbsp;&nbsp;&nbsp; # Overwrite share options</span><br /><br /><span class="ts8"># Create and load snapshots</span><br /><span class="ts8">zfs snapshot z0/data@backup-20120601</span><br /><span class="ts8">zfs rollback z0/data@backup-20120601</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">Loopback mounting</span></p>
<p class="ps2"><span class="ts8">lofiadm -a &lt;some file&gt;</span><br /><span class="ts8">mount -F &lt;fstype&gt; -o ro /dev/lofi/1 /mnt</span><br /><span class="ts8">umount /mnt</span><br /><span class="ts8">lofiadm -d /dev/lofi/1</span><br />&nbsp;</p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><span class="ts2">OpenSolaris descendants: </span><a href="http://omnios.omniti.com/" class="hs0">OmniOS</a><span class="ts2">, </span><a href="https://www.illumos.org/" class="hs0">Illumos</a></p>
<p class="ps2"><span style="font-size: 14pt; line-height: 0; vertical-align: middle; color: Black">&bull;</span><span style="display: inline-block; width: 24px"></span><a href="http://www.par.univie.ac.at/solaris/pca/" class="hs0">PCA</a><span class="ts2">: Patch Checking and Installation</span></p>
<p class="ps3"><br /></p>
<div>
  <hr class="hline0" />
</div>
<p class="ps4"><span class="ts1">Created with an evaluation copy of HelpSmith.</span><br /><span class="ts1">To remove this notice, you should </span><a href="http://www.helpsmith.com/buynow.php" target="_blank" class="hs1">purchase the full version</a><span class="ts1">&nbsp;of the product.</span></p>
</body>
</html>